<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
		<style>
			* {
				padding: 0;
				margin: 0;
			}
			
			#main_container {
				width: 100vw;
				height: 90vh;
				background-color: #000;
				overflow-x: scroll;
				overflow-y: hidden;
				display: flex;
			}
			
			/* 1. Стилизация самого скроллбара */
			#main_container::-webkit-scrollbar {
				/* На мобильных устройствах с оверлейными скроллбарами 
				   эта высота может быть проигнорирована, но на десктопе сработает. */
				height: 5vh; 
			}

			/* 2. Стилизация дорожки (фона) */
			#main_container::-webkit-scrollbar-track {
				background: #222;
			}

			/* 3. Стилизация ползунка (движущейся части) */
			#main_container::-webkit-scrollbar-thumb {
				background: #aaa; 
			}

			/* 4. Изменение цвета ползунка при наведении */
			#main_container::-webkit-scrollbar-thumb:hover {
				background: #ccc; 
			}
			
			
			#map_container {
				width: 100vw;
				height: 85vh;
				background-color: blue;
				flex-shrink: 0;
			}
			
			#map_image {
				background-color: red;
			}
			
			#table_container {
				min-width: 100vw;
				height: 85vh;
				background-color: green;
				flex-shrink: 0;
			}
			
			#menu_container {
				width: 100vw;
				height: 10vh;
				background-color: yellow;
				overflow: hidden;
				display: flex;
			}
			
			#menu_container .button {
				width: 8vh;
				height: 8vh;
				margin: 1vh;
				background-color: red;
			}
			
		</style>
	</head>
	<body>
		<div id="menu_container">
			<button class="button">
			</button>
		</div>
		<div id="main_container">
			<div id="map_container">
				<img id="map_image" src="https://www.bsmfuture.co.uk/assets/img/image15.jpg" />
			</div>
			<div id="table_container">
				
			</div>
		</div>
		<script>
			//p.s. ГЕМИНИ НАЕБЩИК!!!
			
			const image = document.getElementById('map_image');
			let initialDistance = 0;
			let currentScale = 1;

			image.addEventListener('touchstart', (e) => {
				// 1. Проверяем, что это два касания
				if (e.touches.length === 2) {
					// Запрещаем браузеру масштабировать страницу
					e.preventDefault(); 
					
					// 2. Вычисляем начальное расстояние между пальцами
					const dx = e.touches[0].clientX - e.touches[1].clientX;
					const dy = e.touches[0].clientY - e.touches[1].clientY;
					initialDistance = Math.sqrt(dx * dx + dy * dy);
				}
			});

			image.addEventListener('touchmove', (e) => {
				if (e.touches.length === 2 && initialDistance > 0) {
					e.preventDefault(); 

					// 3. Вычисляем текущее расстояние
					const dx = e.touches[0].clientX - e.touches[1].clientX;
					const dy = e.touches[0].clientY - e.touches[1].clientY;
					const newDistance = Math.sqrt(dx * dx + dy * dy);

					// 4. Считаем коэффициент масштаба
					const scaleFactor = newDistance / initialDistance;

					// 5. Применяем масштабирование (умножаем на предыдущий масштаб)
					image.style.transform = `scale(${scaleFactor * currentScale})`;
				}
			});

			image.addEventListener('touchend', (e) => {
				// 6. Фиксируем текущий масштаб как новый "currentScale"
				if (e.touches.length < 2) {
					// Приблизительный расчет нового масштаба (требует более точной логики)
					const finalTransform = window.getComputedStyle(image).transform;
					// Здесь нужно извлечь текущее значение scale из матрицы transform
					
					// В упрощенном примере:
					// currentScale = currentScale * scaleFactor; 
					
					initialDistance = 0; // Сбрасываем начальное расстояние
				}
			});
		</script>
	</body>
</html>
